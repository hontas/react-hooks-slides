import { Head } from 'mdx-deck';
import { LiveCode } from 'mdx-deck-live-code';
import { CodeSurfer } from 'mdx-deck-code-surfer';
import dracula from 'prism-react-renderer/themes/dracula';
import LocaleContext, {
  LocaleContextProvider
} from './context/LocaleContextClass';
import usePersistantState from './lib/customHook';
export { default as theme } from './theme';
import 'style-loader!css-loader!./styles/base.css';

<Head>
  <title>React hooks</title>
</Head>

# React hooks

---

## Agenda

- Hooks let you...
- useState
- useEffect
- useContext
- custom hooks
- other hooks
- testing

```notes
- Create speaker notes in fenced code blocks
```

---

# Hooks let you...

- reuse logic between components without changing component hierarchy.
- split one component into smaller functions based on what pieces are related.
- use React without classes.

https://reactjs.org/docs/hooks-intro.html#motivation

---

## State

---

<LiveCode
  title="State using Class"
  size="large"
  code={require('!raw-loader!./components/UseStateClass.js')}
/>

---

<LiveCode
  title="State using hooks"
  size="large"
  code={require('!raw-loader!./components/UseStateHook.js')}
/>

---

## Effects

---

<LiveCode
  title="Effects using Class"
  size="large"
  code={require('!raw-loader!./components/UseEffectClass.js')}
/>

---

<LiveCode
  title="Effects using hooks"
  size="large"
  code={require('!raw-loader!./components/UseEffectHook.js')}
/>

---

## Context

---

<CodeSurfer
  lang="javascript"
  theme={dracula}
  code={require('!raw-loader!./context/LocaleContextClass.js')}
/>

---

<LiveCode
  title="Context API"
  size="large"
  providerProps={{
    scope: { LocaleContext, LocaleContextProvider }
  }}
  code={require('!raw-loader!./components/UseContextComp.js')}
/>

---

<LiveCode
  title="Context using hooks"
  size="large"
  providerProps={{
    scope: { LocaleContext, LocaleContextProvider }
  }}
  code={require('!raw-loader!./components/UseContextHook.js')}
/>

---

## Custom hooks

Easily share and test reusable logic

---

<CodeSurfer
  lang="javascript"
  theme={dracula}
  title="Custom hook"
  code={require('!raw-loader!./lib/customHook.js')}
/>

---

<LiveCode
  title="Custom hook"
  providerProps={{
    scope: { usePersistantState }
  }}
  code={require('!raw-loader!./components/UseCustomHook.js')}
/>

---

# instance variable

---

<LiveCode
  title="useRef as instance variable"
  size="large"
  code={require('!raw-loader!./components/UseRefHook.js')}
/>

---

## Other hooks

- lazy useState(() => {})
- useReducer(reducer, initialArg, lazyInitFn)
- initialState = lazyInitFn(initialArg);
- useMemo(() => {}, [])
- useCallback(() => {}, [])
- useLayoutEffect(() => {})
- useDebugValue(value)
  - use in custom hook
  - useDebugValue(date, date => date.toDateString());

---

## Testing

As long as you dont depend on implementation details in your tests - `there should be no difference`â„¢

---

<CodeSurfer
  title="Testing effect"
  language="javascript"
  code={require('!raw-loader!./components/TestEffectHook.js')}
/>

---

## Le fin
